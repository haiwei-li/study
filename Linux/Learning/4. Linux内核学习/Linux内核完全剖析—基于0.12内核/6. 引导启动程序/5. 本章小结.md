引导加载程序 bootsect.s 将 setup.s 代码和 system 模块加载到内存中, 并且分别把自己和 setup.s 代码移动到物理内存 0x90000 和 0x90200 处后, 就把执行权交给 setup 程序. 其中 system 模块的首部包含有 head.s 代码.

setup 利用 ROM BIOS 的中断程序获取机器一些基本参数, 并保存在 0x90000 开始的内存块中, 供后面程序使用. 同时将 system 模块往下移动到物理地址 0x00000 开始处, 这样, system 中 head.s 代码就在 0x0000 开始处. 然后加载描述符表基地址到描述符表寄存器中. 接下来对中断控制硬件重设, 最后设置 CR0 并跳转到 system 模块的 head.s 代码开始处, 使 CPU 进入 32 位保护模式.

head.s 代码主要作用是初步初始化中断描述符表中的 256 个门描述符, 检查 A20 地址线是否打开, 测试系统是否有数学协处理器. 然后初始化内存页目录表. 最后跳转到 system 模块中初始化程序 init/main.c 中继续执行.

下章详细描述 init/main.c 的功能和作用.