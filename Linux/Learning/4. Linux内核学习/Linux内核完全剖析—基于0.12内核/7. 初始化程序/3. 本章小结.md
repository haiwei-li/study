**对于后续章节的阅读, 可以将 main.c 作为一条主线进行, 并不需要按章节顺序阅读**.

在生成一系列进程后, 系统是如果分时运行这些进程或如果调度这些进程运行的呢?内核是通过执行 sched.c 程序中调度函数 schedule()和 system\_call.s 中定时时钟中断过程\_timer\_interrupt 来操作的. 内核设定每 10ms 发出一次时钟中断, 并在该中断过程中, 通过调用 do\_timer()函数检查所有进程当前执行情况来确定进程的下一步状态.

进程在执行中由于希望资源暂时缺乏面临时需要等待, 它就在系统调用中通过 sleep\_on()间接调用 schedule()函数, 将 CPU 的使用权交出. 然后 schedule()根据所有进程的当前状态和优先权决定. 对于一直在可运行状态的进程, 当时钟中断过程判断出它运行的时间片已经被用完, 就在 do\_timer()中执行进程切换操作.