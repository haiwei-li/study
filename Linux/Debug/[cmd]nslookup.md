
<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [1 nslookup 作用](#1-nslookup-作用)
- [2 A 记录](#2-a-记录)
- [3 MX 记录](#3-mx-记录)
- [4 NS 记录](#4-ns-记录)
- [5 CNAME 记录](#5-cname-记录)
- [6 其他记录](#6-其他记录)

<!-- /code_chunk_output -->

# 1 nslookup 作用

nslookup 用于**查询 DNS 的记录**, 查询**域名解析是否正常**, 在网络故障时用来诊断网络问题

```
[root@gerry ~]# cat /etc/resolv.conf
# Generated by NetworkManager
search localdomain
nameserver 172.16.100.2
```

```
[root@gerry ~]# nslookup
>
```

# 2 A 记录

默认选项

A(Address)记录指的是用来指定**主机名或域名对应的 IP 记录**.

```
nslookup domain [dns-server]
```

```
[root@gerry ~]# nslookup -type=A bilibili.com 8.8.8.8
Server:		8.8.8.8
Address:	8.8.8.8#53

Non-authoritative answer:
Name:	bilibili.com
Address: 106.75.240.122
```

如果没有指定 dns\-server, 用系统默认的 dns 服务器.

```
[root@gerry ~]# nslookup bilibili.com
Server:		172.16.100.2
Address:	172.16.100.2#53

Non-authoritative answer:
Name:	bilibili.com
Address: 106.75.240.122

[root@gerry ~]# cat /etc/resolv.conf
# Generated by NetworkManager
search localdomain
nameserver 172.16.100.2
```

在提示符\>后直接输入域名, 可以查看该域名的 A 记录(也可以用 set type=a 指令设置):

```
[root@gerry ~]# nslookup
> bilibili.com
Server:		172.16.100.2
Address:	172.16.100.2#53

Non-authoritative answer:
Name:	bilibili.com
Address: 106.75.240.122
>
```

```
[root@gerry ~]# nslookup -type=A tencent.com 8.8.8.8
Server:		8.8.8.8
Address:	8.8.8.8#53

Non-authoritative answer:
Name:	tencent.com
Address: 113.107.238.15
Name:	tencent.com
Address: 119.147.33.33
Name:	tencent.com
Address: 113.96.156.151
Name:	tencent.com
Address: 113.96.156.150
Name:	tencent.com
Address: 203.205.158.34
Name:	tencent.com
Address: 113.107.238.11
Name:	tencent.com
Address: 119.147.33.36
Name:	tencent.com
Address: 113.107.238.14
```

# 3 MX 记录

```
nslookup -type=mx domain [dns-server]
```

MX(mail exchanger)记录, **邮件交换记录**, 它指向一个**邮件服务器**, 用于电子邮件系统发邮件时根据**收信人的地址后缀**来**定位邮件服务器**.

```
[root@gerry ~]# nslookup -type=mx bilibili.com
Server:		172.16.100.2
Address:	172.16.100.2#53

Non-authoritative answer:
bilibili.com	mail exchanger = 10 mxbiz2.qq.com.
bilibili.com	mail exchanger = 5 mxbiz1.qq.com.

Authoritative answers can be found from:
```

输入 set type=mx, 再输入域名可查询 mx 类型记录

```
[root@gerry ~]# nslookup
> set type=mx
> bilibili.com
Server:		172.16.100.2
Address:	172.16.100.2#53

Non-authoritative answer:
bilibili.com	mail exchanger = 5 mxbiz1.qq.com.
bilibili.com	mail exchanger = 10 mxbiz2.qq.com.

Authoritative answers can be found from:
>
```

MX perference = 10 指 MX 记录的优先级

# 4 NS 记录

NS(nameserver)记录, 用来指定**该域名由那个 DNS 服务器**来进行解析.

```
nslookup -type=mx bilibili.com
```

先输入 set type=ns 再输入域名

```
[root@gerry ~]# nslookup
> set type=ns
> bilibili.com
Server:		172.16.100.2
Address:	172.16.100.2#53

Non-authoritative answer:
bilibili.com	nameserver = ns3.dnsv5.com.
bilibili.com	nameserver = ns4.dnsv5.com.

Authoritative answers can be found from:
>
```

# 5 CNAME 记录

cname 记录是**别名记录**, 也成为规范名字. 这种记录允许将多个名字映射到同一台计算机

输入`set type=cname`可以查询

```
[root@gerry ~]# nslookup
> set type=cname
> bilibili.com
Server:		172.16.100.2
Address:	172.16.100.2#53

Name:	bilibili.com
Address: 106.75.240.122
```

# 6 其他记录

```
nslookup -type=type domain [dns-server]
```

其中, type 可以是以下这些类型:

* A 地址记录(Ipv4)
* AAAA 地址记录(Ipv6)
* AFSDB Andrew 文件系统数据库服务器记录
* ATMA ATM 地址记录
* CNAME 别名记录
* HINFO 硬件配置记录, 包括 CPU、操作系统信息
* ISDN 域名对应的 ISDN 号码
* MB 存放指定邮箱的服务器
* MG 邮件组记录
* MINFO 邮件组和邮箱的信息记录
* MR 改名的邮箱记录
* MX 邮件服务器记录
* NS 名字服务器记录
* PTR 反向记录(从 IP 地址解释域名)
* RP 负责人记录
* RT 路由穿透记录
* SRV TCP 服务器信息记录
* TXT 域名对应的文本信息
* X25 域名对应的 X.25 地址记录