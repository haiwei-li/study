
一个虚拟化平台中存在多个 VM (虚拟机), 每个 VM 就像一个独立的物理平台, 有自己的物理资源(包括内存、设备等). guest OS 运行在虚拟机环境里, 与普通 OS 一样负责管理虚拟机里的资源.更重要的是, guest OS 并不知道自己运行在虚拟机环境中.

VMM 需要为每个 VM 分配独立的物理内存,然而物理平台上的内存是有限的,怎样
合理有效地分配和管理每个虚拟机的物理内存是 VMM 设计的难点之
在本书的例子中,每个逻辑处理器支持 4 个虚拟机.每个虚拟机对应一个 VME
(VMCS manage block 持一个逻辑处理器同时运行和管理 4 个虚拟机.实际上本书所有的例子并没有同时开启 4
个虚拟机,但要做到这一点并不难
图 6-18 是物理平台内存的分配策略图.本书的例子中,物理平台上的内存区域分为
两大部分 :hostVMM 所使用的区域,以及 GuestDMA 所使用的区域,各个 VM 从这个
又域里动态分配