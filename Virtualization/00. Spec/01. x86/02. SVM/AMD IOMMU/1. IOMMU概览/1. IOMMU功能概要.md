
Summary of IOMMU Capabilities

IOMMU扩展了最初由AMD64 DEV引入的**保护域**(protection domains, 或简称为域, domain)的概念.  IOMMU允许将系统中的每个I/O设备分配给特定域和一组不同的I/O页表.  

当I/O设备尝试读取或写入系统内存时, IOMMU会拦截访问, 确定设备已分配到的域, 并使用与该域关联的TLB条目或与该域关联的I/O页表 I/O设备, 用于确定是否允许访问以及要访问的系统存储器中的实际位置. 






IOMMU提供的主要系统资源包括: 
* 使用基于内存的**转换表**进行**I/O DMA**访问**权限检查**和**地址转换**. 
* 对与AMD64长模式页表格式兼容的来宾转换表的可选支持. 
* **设备表**, 允许将**I/O设备**分配到**特定域**, 并包含指向I/O设备的页表的指针. 
* IOMMU用于提供**I/O设备中断**的**权限检查**和中断**重新映射**的**中断重新映射表**
* 可选的AMD64虚拟机**虚拟APIC机制**, IOMMU使用该机制将**中断**传递给**客户VM**. 
* 基于**内存的队列**, 用于在**IOMMU**和**系统处理器**之间**交换命令**和**状态信息**. 
* 对外围页请求(PPR)日志的可选支持. 
* 减轻PPR和事件日志溢出的功能. 
* 对基于硬件的机制的可选支持, 以允许**特权I/O设备直接访问**访问**系统内存**的定义区域. 