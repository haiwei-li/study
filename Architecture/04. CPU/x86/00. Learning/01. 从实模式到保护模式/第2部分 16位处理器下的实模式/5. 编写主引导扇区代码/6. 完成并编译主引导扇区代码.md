# 1. 主引导扇区有效标志

一个有效的主引导扇区, 其最后两个字节的数据必须是 0x55 和 0xAA(这是个约定).

定义这两个字节很简单, 伪指令 db 和 dw 就可以实现.

源程序第 103 行就是 db 版本的实现, 但没有标号. 标号的作用是提供当前位置的汇编(偏移)地址供其他指令引用, 如果没有任何指令引用这个地址, 标号可以省略. 这是两个单独的字节, 所以 0x55 在前, 0xAA 在后, 即使编译之后也是这个顺序.

但是, 如果采用 dw 版本, 应该这样写:

```
dw 0xaa55
```

因为 Intel 处理器, **将一个字写入内存**, 采用小端序. 低字节 0x55 在低地址, 高字节 0xaa 在高地址.

经过计算和尝试, 在前面的内容和结尾的 0xAA55 之间, 有 203 字节的空洞. 因此, 源程序的第 102 行, 用于声明 203 为 0 的数值来填补.

**伪指令 times 可用于重复它后面的指令若干次**. 比如

```
times 20 mov ax,bx
```

将在编译时重复生成 mov ax,bx 指令 20 次, 即重复该指令的机器码(89 D8)20 次.

```
times 203 db 0
```

在编译时保留 203 个为 0 的字节.

# 2. 编译运行

编译该文件

```
nasm -o boot c05_mbr.asm
```

不能加-f 参数, 因为这不是基于某个平台运行, 不能有格式.