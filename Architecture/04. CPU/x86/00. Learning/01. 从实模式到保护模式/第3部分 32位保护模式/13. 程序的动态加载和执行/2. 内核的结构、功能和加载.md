# 1. 内核的结构

内核分为四个部分, 分别是初始化代码、内核代码段、内核数据段和内核例程段, 主引导程序也是初始化代码的组成部分.

初始化代码用于从 BIOS 那里接管处理器和计算机硬件的控制权, 安装最基本的段描述符, 初始化最初的执行环境. 然后, 从硬盘上读取和加载内核的剩余部分, 创建组成内核的各个内存段. 初始化代码大部分位于代码清单 13-1 中.

内核的代码和数据位于代码清单 13-2 中. 如图 13-1 所示, 内核代码段是在第 385 行定义的, 用于分配内存, 读取和加载用户程序, 控制用户程序的执行.

内核数据段是在第 330 行定义的, 提供了一段可读写的内存空间, 供内核自己使用. 内核例程段是在第 34 行定义的, 用于提供各种用途和功能的子过程以简化代码的编写. 这些例程既可以用于内核, 也供用户程序调用.

![config](images/1.png)